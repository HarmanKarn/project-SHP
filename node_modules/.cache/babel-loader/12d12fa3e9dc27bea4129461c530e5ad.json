{"remainingRequest":"C:\\Users\\admin\\Desktop\\project-SHP\\app\\project-SHP\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\project-SHP\\app\\project-SHP\\src\\router\\index.js","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\project-SHP\\app\\project-SHP\\src\\router\\index.js","mtime":1639803728125},{"path":"C:\\Users\\admin\\Desktop\\project-SHP\\app\\project-SHP\\babel.config.js","mtime":1639803715040},{"path":"C:\\Users\\admin\\Desktop\\project-SHP\\app\\project-SHP\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639803716989},{"path":"C:\\Users\\admin\\Desktop\\project-SHP\\app\\project-SHP\\node_modules\\babel-loader\\lib\\index.js","mtime":1639803716736}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcYWRtaW5cXERlc2t0b3BcXHByb2plY3QtU0hQXFxhcHBcXHByb2plY3QtU0hQXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovL+mFjee9rui3r+eUsQppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCByb3V0ZXMgZnJvbSAnLi9yb3V0ZXMnOyAvL+S9v+eUqOaPkuS7tgoKVnVlLnVzZShWdWVSb3V0ZXIpOyAvL+W8leWFpXN0b3JlCgppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7Ci8qDQrnvJbnqIvlvI/ot6/nlLHot7PovazliLDlvZPliY3ot6/nlLEo5Y+C5pWw5LiN5Y+YKSwNCuWkmuasoeaJp+ihjOS8muaKm+WHuk5hdmlnYXRpb25EdXBsaWNhdGVk55qE6K2m5ZGK6ZSZ6K+vDQoqLwovL+WFiOaKilZ1ZVJvdXRlcuWOn+Wei+WvueixoeeahHB1c2jlhYjkv53lrZjkuIDku70KCnZhciBvcmlnaW5QdXNoID0gVnVlUm91dGVyLnByb3RvdHlwZS5wdXNoOwp2YXIgb3JpZ2luUmVwbGFjZSA9IFZ1ZVJvdXRlci5wcm90b3R5cGUucmVwbGFjZTsgLy8gY29uc29sZS5sb2cob3JpZ2luUHVzaCkKLy/ph43lhplwdXNofHJlcGxhY2UKLy/nrKzkuIDkuKrlj4LmlbA65ZGK6K+J5Y6f5p2lcHVzaOaWueazlSzlvoDlk6rph4zot7Povawo5Lyg6YCS5ZOq5Lqb5Y+C5pWwKQoKVnVlUm91dGVyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGxvY2F0aW9uLCByZXNvbHZlLCByZWplY3QpIHsKICBpZiAocmVzb2x2ZSAmJiByZWplY3QpIHsKICAgIC8vY2FsbHx8YXBwbHnljLrliKsKICAgIC8v55u45ZCM54K5LOmDveWPr+S7peiwg+eUqOWHveaVsOS4gOasoSzpg73lj6/ku6Xnr6HmlLnlh73mlbDnmoTkuIrkuIvpl67kuIDmrKEKICAgIC8v5LiN5ZCM54K5OmNhbGzkuI5hcHBseeS8oOmAkuWPguaVsDpjYWxs5Lyg6YCS5Y+C5pWw55So6YCX5Y+36ZqU5byALGFwcGx55pa55rOV5omn6KGMLOS8oOmAkuaVsOe7hAogICAgb3JpZ2luUHVzaC5jYWxsKHRoaXMsIGxvY2F0aW9uLCByZXNvbHZlLCByZWplY3QpOwogIH0gZWxzZSB7CiAgICBvcmlnaW5QdXNoLmNhbGwodGhpcywgbG9jYXRpb24sIGZ1bmN0aW9uICgpIHt9LCBmdW5jdGlvbiAoKSB7fSk7CiAgfQp9OwoKVnVlUm91dGVyLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKGxvY2F0aW9uLCByZXNvbHZlLCByZWplY3QpIHsKICBpZiAocmVzb2x2ZSAmJiByZWplY3QpIHsKICAgIG9yaWdpblJlcGxhY2UuY2FsbCh0aGlzLCBsb2NhdGlvbiwgcmVzb2x2ZSwgcmVqZWN0KTsKICB9IGVsc2UgewogICAgb3JpZ2luUmVwbGFjZS5jYWxsKHRoaXMsIGxvY2F0aW9uLCBmdW5jdGlvbiAoKSB7fSwgZnVuY3Rpb24gKCkge30pOwogIH0KfTsgLy/phY3nva7ot6/nlLEKCgp2YXIgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcih7CiAgLy/phY3nva7ot6/nlLEKICByb3V0ZXM6IHJvdXRlcywKICAvL+a7muWKqOihjOS4ugogIHNjcm9sbEJlaGF2aW9yOiBmdW5jdGlvbiBzY3JvbGxCZWhhdmlvcih0bywgZnJvbSwgc2F2ZVBvc2l0aW9uKSB7CiAgICAvL3k65Luj6KGo5rua5Yqo5p2h55qEeei9tAogICAgcmV0dXJuIHsKICAgICAgeTogMAogICAgfTsKICB9Cn0pOyAvL+WFqOWxgOWuiOWNqzrliY3nva7lrojljaso6Lev55Sx6Lez6L2s5LmL5YmN6L+b6KGM5Yik5patKQoKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciB0b2tlbiwgbmFtZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgLy90bzrlj6/ku6Xojrflj5bliLDopoHot7PovazliLDlk6rkuKrot6/nlLHnmoTkv6Hmga8KICAgICAgICAgICAgLy9mcm9tOuWPr+S7peiOt+WPluWIsOS7juWTquS4qui3r+eUseiAjOadpeeahOS/oeaBrwogICAgICAgICAgICAvL25leHQ65pS+6KGM5Ye95pWwIG5leHQoKeaUvuihjCAgbmV4dCgncGF0aCcp5pS+6KGM5Yiw5oyH5a6a6Lev55SxICBuZXh0KGZhbHNlKQogICAgICAgICAgICBuZXh0KCk7IC8v55So5oi355m75b2V5LqGLOaJjeS8muaciXRva2VuLOacqueZu+W9leS4gOWumuS4jeS8muaciXRva2VuCgogICAgICAgICAgICB0b2tlbiA9IHN0b3JlLnN0YXRlLnVzZXIudG9rZW47IC8v55So5oi35L+h5oGvCgogICAgICAgICAgICBuYW1lID0gc3RvcmUuc3RhdGUudXNlci51c2VySW5mby5uYW1lOyAvL+eUqOaIt+W3sueZu+W9lQoKICAgICAgICAgICAgaWYgKCF0b2tlbikgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEodG8ucGF0aCA9PSAiL2xvZ2luIikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgnL2hvbWUnKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGlmICghbmFtZSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjM7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2dldFVzZXJJbmZvJyk7CgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjM7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxODsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxMik7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1c2VyTG9nb3V0Jyk7CgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgbmV4dCgnL2xvZ2luJyk7CgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI2OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAvL+acqueZu+W9lQogICAgICAgICAgICBuZXh0KCk7CgogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEyLCAxOF1dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["C:/Users/admin/Desktop/project-SHP/app/project-SHP/src/router/index.js"],"names":["Vue","VueRouter","routes","use","store","originPush","prototype","push","originReplace","replace","location","resolve","reject","call","router","scrollBehavior","to","from","savePosition","y","beforeEach","next","token","state","user","name","userInfo","path","dispatch"],"mappings":"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","sourcesContent":["//配置路由\r\nimport Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport routes from './routes'\r\n//使用插件\r\nVue.use(VueRouter)\r\n\r\n\r\n//引入store\r\nimport store from '@/store'\r\n\r\n/*\r\n编程式路由跳转到当前路由(参数不变),\r\n多次执行会抛出NavigationDuplicated的警告错误\r\n*/\r\n//先把VueRouter原型对象的push先保存一份\r\nlet originPush = VueRouter.prototype.push;\r\nlet originReplace = VueRouter.prototype.replace;\r\n// console.log(originPush)\r\n\r\n//重写push|replace\r\n//第一个参数:告诉原来push方法,往哪里跳转(传递哪些参数)\r\nVueRouter.prototype.push = function(location,resolve,reject){\r\n    if(resolve && reject) {\r\n        //call||apply区别\r\n        //相同点,都可以调用函数一次,都可以篡改函数的上下问一次\r\n        //不同点:call与apply传递参数:call传递参数用逗号隔开,apply方法执行,传递数组\r\n        originPush.call(this,location,resolve,reject);\r\n    }else{\r\n        originPush.call(this,location,()=>{},()=>{})\r\n    }\r\n}\r\nVueRouter.prototype.replace = function(location,resolve,reject){\r\n    if(resolve && reject) {\r\n        originReplace.call(this,location,resolve,reject);\r\n    }else{\r\n        originReplace.call(this,location,()=>{},()=>{})\r\n    }\r\n}\r\n\r\n//配置路由\r\nlet router = new VueRouter({\r\n    //配置路由\r\n    routes,\r\n    //滚动行为\r\n    scrollBehavior(to,from,savePosition){\r\n        //y:代表滚动条的y轴\r\n        return {y:0}\r\n    }\r\n});\r\n\r\n//全局守卫:前置守卫(路由跳转之前进行判断)\r\nrouter.beforeEach(async(to,from,next)=>{\r\n    //to:可以获取到要跳转到哪个路由的信息\r\n    //from:可以获取到从哪个路由而来的信息\r\n    //next:放行函数 next()放行  next('path')放行到指定路由  next(false)\r\n    next();\r\n    //用户登录了,才会有token,未登录一定不会有token\r\n    let token = store.state.user.token\r\n    //用户信息\r\n    let name = store.state.user.userInfo.name;\r\n    //用户已登录\r\n    if(token){\r\n        //禁止用户跳转进login[停留在首页]\r\n        if(to.path==\"/login\"){\r\n            next('/home');\r\n        }else{\r\n            //登录了,去的不是login[home|search|detail|shopcart]\r\n            //如果用户名已有\r\n            if(name){\r\n                next();\r\n            }else{\r\n                //没有用户信息,派发action让仓库存储用户信息再跳转\r\n                try {\r\n                    //获取用户信息成功\r\n                    await store.dispatch('getUserInfo');\r\n                    next();\r\n                } catch (error) {\r\n                    //token失效了获取不到用户信息,重新登录\r\n                    //清除token\r\n                   await store.dispatch('userLogout')\r\n                   next('/login');\r\n                }\r\n            }\r\n        }\r\n    }else{\r\n        //未登录\r\n        next();\r\n    }\r\n});\r\nexport default router;"]}]}